
# github
git clone https://github.com/sgrote/FuncBlocks.git
# local
cd /r1/people/steffi_grote/R_packages/FuncBlocks_package


# package version number is set in 
FuncBlocks/DESCRIPTION

# help page
FuncBlocks/vignettes/FuncBlocks.Rmd

# needs BiocStyle installed
# in R:
source("https://bioconductor.org/biocLite.R")
biocLite("BiocStyle")

# help files for single function like ?go_enrich should be in FuncBlocks/man

# vignette with package usage examples in FuncBlocks/vignettes
not there yet

# build package
cd /home/steffi_grote/R_packages/FuncBlocks_package 
R CMD build FuncBlocks #--resave-data

# install package
R CMD INSTALL FuncBlocks_1.2.4.tar.gz

# look at help page and news
# in R:
options("help_type"="html") # to check links
?go_enrich
?get_anno_genes
#vignette("FuncBlocks",package="FuncBlocks")  ## not there yet
news(package="FuncBlocks")

# if new .cpp files are added, Rcpp's compileAttributes must be run once:
# in R:
require("Rcpp")
setwd("/home/steffi_grote/R_packages/FuncBlocks_package/FuncBlocks")
compileAttributes()

# check that values of some sample anaylses still match "tests/saved_results.RData" (or set them)
# (caution: might differ slightly between computers)
cd /home/steffi_grote/R_packages/FuncBlocks_package # needs to be executed there
Rscript test_values.R
#Rscript test_values.R set_values  		# to set the saved results ("tests/saved_results.RData")




# TODO
# version 1.2.6
(*) ref-genome default in get_anno_genes
(*) only go-ids as input for get_anno_genes (remove res default option)
() change col-name in get_names to "go_name"
() root-nodes as optional input parameter for go_enrich


() add GO-names to get_parent, get_child, [get_anno_genes - eher nicht, vllt. ein beispiel mit get_names in man-page, es reicht schon wenn sich die ID immer wiederholt]
() add in man-page get_categories an example that uses get_parent_nodes
() sort go_enrich res by n-candidate expected (tail is unordered)
() update testing scripts with modified go-sort and helper functions
() data.table in go_enrich
() get_ids
() vignette [also show example get_anno_genes for input candidate and background genes]

# binomial test, contigany tables (1.3.0)
() binomial test and contingancy tests

# refinement from Func (1.4.0)
() refinement from Func (either use c++ or reimplement in R)

# ontology  stuff (1.5.0)
() print, return or attribute(!) version of ontology, annotations, (gene-coords for gene_len and regions)
() print ontology, annotations versions in get_anno_genes (or as attribute?)
() allow user-defined term-tables (GO-graph) (-> roots named explicitly or infer from term[,3]?)
() allow user-defined GO-annotations
() allow user-defined gene_coordinates (?)
() update-functions for the previous 3? (biomaRt, ensembldb packages?)


() add plot for wilcoxon (plot_scores: gos -> distribution/density of scores compared to root, violin?)

() in get children and get parents multiple entries for the same parent/child with differing distances are possible - is that still the case? if so, delete duplicates and keep only shortest distance

() also return total number of annotated genes
() maybe use one generic plotting function instead of plot_odds / plot_scores...
() wilcoxon for genomic regions? - try out if easy to implement
() FDR?
() overall-significance?


() e.g. in get_anno_genes return NULL (as now) or rather an empty dataframe identical to normal output?
() visualization (email janet - plotting GO-categories)

() add testthat scripts
() add vignette (include table with versions of GO-tree and annotations)
() remove check for FWER-order before publication












