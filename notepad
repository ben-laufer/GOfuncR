
# github
git clone https://github.com/sgrote/FuncBlocks.git
# local
cd /r1/people/steffi_grote/R_packages/FuncBlocks_package


# package version number is set in 
FuncBlocks/DESCRIPTION

# help page
FuncBlocks/vignettes/FuncBlocks.Rmd

# needs BiocStyle installed
# in R:
source("https://bioconductor.org/biocLite.R")
biocLite("BiocStyle")

# help files for single function like ?go_enrich should be in FuncBlocks/man

# vignette with package usage examples in FuncBlocks/vignettes
not there yet

# build package
cd /home/steffi_grote/R_packages/FuncBlocks_package 
R CMD build FuncBlocks #--resave-data

# install package
R CMD INSTALL FuncBlocks_1.2.4.tar.gz

# look at help page and news
# in R:
options("help_type"="html") # to check links
?go_enrich
?get_anno_genes
#vignette("FuncBlocks",package="FuncBlocks")  ## not there yet
news(package="FuncBlocks")

# if new .cpp files are added, Rcpp's compileAttributes must be run once:
# in R:
require("Rcpp")
setwd("/home/steffi_grote/R_packages/FuncBlocks_package/FuncBlocks")
compileAttributes()

# check that values of some sample anaylses still match "tests/saved_results.RData" (or set them)
# (caution: might differ slightly between computers)
cd /home/steffi_grote/R_packages/FuncBlocks_package # needs to be executed there
Rscript test_values.R
#Rscript test_values.R set_values  		# to set the saved results ("tests/saved_results.RData")

# TODO
() get_anno_categories: find all annotations of a gene
() print, return or attribute(!) version of ontology, annotations, (gene-coords for gene_len and regions)
() print ontology, annotations versions in get_anno_genes (or as attribute?)
() in get children and get parents multiple entries for the same parent/child with differing distances are possible - is that still the case? if so, delete duplicates and keep only shortest distance

() also return total number of annotated genes
() add plot for wilcoxon (plot_scores: gos -> distribution/density of scores compared to root, violin?)
() maybe use one generic plotting function instead of plot_odds / plot_scores...
() wilcoxon for genomic regions? - try out if easy to implement
() add binomial and contingancy tests
() refinement from Func (either use c++ or reimplement in R)
() FDR?
() overall-significance?

() allow user-defined term-tables (GO-graph) (-> roots named explicitly or infer from term[,3]?)
() allow user-defined GO-annotations
() allow user-defined gene_coordinates (?)
() update-functions for the previous 3? (biomaRt, ensembldb packages?)

() e.g. in get_anno_genes return NULL (as now) or rather an empty dataframe identical to normal output?
() visualization (email janet - plotting GO-categories)

() add testthat scripts
() add help-pages 
() add vignette (include table with versions of GO-tree and annotations)
() remove check for FWER-order before publication












